<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="我的博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="我的博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="老许">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>我的博客</title>
  








<meta name="generator" content="Hexo 4.2.1"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">我的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/17/jdbc/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="老许">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/06/17/jdbc/" itemprop="url">jdbc</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-06-17T17:16:51+08:00">
                2020-06-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h1 id="jdbc规范"><a href="#jdbc规范" class="headerlink" title="jdbc规范"></a>jdbc规范</h1><p>这个是java定义的一套连接操作数据库的规范 </p>
<ol>
<li>JDBC 1.0 随JDK1.1发布；</li>
<li>JDBC 2.0 随JDK1.2 和 JDK1.3 发布<br>JDBC 2.0 和 JDBC 2.1 API 被分入两个包：<br>java.sql 包（包括核心 API；它是 JDBC 1.22 API 的增强）<br>javax.sql 包（可选的包，用于支持连接池、分布式事务及其他类似的高级功能）。<br>J2SE（Java 2，标准版，在 JDK 1.2 及更高版本中实现）支持 JDBC 2.0 和 JDBC 2.1 核心 API，J2EE 1.3 支持 JDBC 2.0 可选包。</li>
<li>JDBC3.0 随JDK1.4发布<br>JDBC 3.0 最终于 2002 年 5 月完成，并已合并入 J2SE 1.4 和 J2EE 1.4。<br>从JDBC 3.0 开始有对应的jsr规范（jsr是Java Specification Request 的缩写，意思是Java 规范提案） <a href="https://jcp.org/en/jsr/detail?id=54" target="_blank" rel="noopener">https://jcp.org/en/jsr/detail?id=54</a></li>
<li>JDBC 4.0 随 JDK1.6 发布<br>从JDBC4.0开始有对应的JDBC API规范，同时也整合之前的一些规范信息 <a href="https://jcp.org/en/jsr/detail?id=221" target="_blank" rel="noopener">https://jcp.org/en/jsr/detail?id=221</a></li>
<li>JDBC4.1 随 JDK1.7 发布</li>
<li>JDBC4.2 随 JDK1.8 发布</li>
<li>关于各个版本jdk对jdbc规范的支持<pre>
JDK 1.1-JDBC 1.请注意，在8.0版中，对JDBC 1的支持已被删除，因此请在更新服务器时更新JDK。
JDK 1.2、1.3-JDBC 2。
JDK 1.3 + J2EE-JDBC 2 EE。它包含对javax.sql类的附加支持。
JDK 1.4、1.5-JDBC3。它包含对SSL和javax.sql的支持，但由于它已添加到J2SE发行版中，因此不需要J2EE。
JDK 6-JDBC 4.0对JDBC4方法的支持不完整，但是大多数方法已实现。
JDK 7-JDBC 4.1对JDBC4方法的支持不完整，但是大多数方法已实现。
JDK 8-JDBC 4.2对JDBC4方法的支持尚未完成，但是大多数方法已实现。
</pre>
给出jdbc3 和jdbc4的一些新的特性<br></li>
</ol>
<h2 id="关于jdbc3-的一些新特性"><a href="#关于jdbc3-的一些新特性" class="headerlink" title="关于jdbc3 的一些新特性"></a>关于jdbc3 的一些新特性</h2><ul>
<li>Savepoint support<br><br>Added the Savepoint interface, which contains new methods to set, release, or<br>roll back a transaction to designated savepoints.(添加了Savepoint接口，该接口包含用于将事务设置，释放或回滚到指定保存点的新方法。就是可以回滚到指定的保存点)<br></li>
<li>I Reuse of prepared statements by connection pools<br><br>Added the ability for deployers to control how prepared statements are pooled<br>and reused by connections.(为部署者增加了控制连接如何合并和重用准备好的语句的功能。)<br></li>
<li>I Connection pool configuration<br><br>Defined a number of properties for the ConnectionPoolDataSource interface.<br>These properties can be used to describe how PooledConnection objects<br>created by DataSource objects should be pooled.(为ConnectionPoolDataSource接口定义了许多属性。这些属性可用于描述应如何合并由DataSource对象创建的PooledConnection对象。)<br></li>
<li>I Retrieval of parameter metadata<br><br>Added the interface ParameterMetaData, which describes the number, type<br>and properties of parameters to prepared statements.(添加了ParameterMetaData接口，该接口描述了准备好的语句的参数数量，类型和属性。)<br></li>
<li>I Retrieval of auto-generated keys<br><br>Added a means of retrieving values from columns containing automatically<br>generated values.(添加了一种从包含自动生成的值的列中检索值的方法。)<br></li>
<li>I Ability to have multiple open ResultSet objects<br><br>Added the new method getMoreResults(int), whichtakes an argument that<br>specifies whether ResultSet objects returned by a Statement object should be<br>closed before returning any subsequent ResultSet objects.(添加了新方法getMoreResults（int），该方法带有一个参数，该参数指定在返回任何后续ResultSet对象之前是否应关闭Statement对象返回的ResultSet对象。)<br></li>
<li>Passing parameters to CallableStatement objects by name<br><br>Added methods to allow a string to identify the parameter to be set for a<br>CallableStatement object.(添加的方法允许字符串标识要为CallableStatement对象设置的参数)<br></li>
<li>I Holdable cursor support<br><br>Added the ability to specify the of holdability of a ResultSet object.</li>
<li>I BOOLEAN data type<br><br>Added the data type java.sql.Types.BOOLEAN. BOOLEAN is logically equivalent to BIT.<br></li>
<li>I Making internal updates to the data in Blob and Clob objects<br><br>Added methods to allow the data contained in Blob and Clob objects to be altered.<br></li>
<li>I Retrieving and updating the object referenced by a Ref object<br><br>Added methods to retrieve the object referenced by a Ref object. Also added the ability to update a referenced object through the Ref object.<br></li>
<li>I Updating of columns containing BLOB, CLOB, ARRAY and REF types<br><br>Added of the updateBlob, updateClob, updateArray, and updateRef methods to the ResultSet interface.<br></li>
<li>I DATALINK/ URL data type<br><br>Added the data type java.sql.Types.DATALINK, allowing JDBC drivers to store and retrieve references to external data.<br></li>
<li>I Transform groups and type mapping<br><br>Described the effect of transform groups and how this is reflected in the meta-data.<br></li>
<li>I Relationship between the JDBC SPI (Service Provider Interface) and the<br><br>Connector architecture Described the relationship between the JDBC SPI and the connector architecture in Chapter 19 “Relationship to Connectors”.<br></li>
<li>I DatabaseMetadata APIs<br><br>Added metadata for retrieving SQL type hierarchies. See the JDBC API Specification for details.<br>

</li>
</ul>
<h2 id="关于jdbc4-的一些新特性"><a href="#关于jdbc4-的一些新特性" class="headerlink" title="关于jdbc4 的一些新特性"></a>关于jdbc4 的一些新特性</h2><ul>
<li>I Added support for REF CURSOR.<br><br>The REF CURSOR data type is supported by several databases to return a result set from a stored procedure.<br></li>
<li>I Support for large update counts<br><br>JDBC methods that return an update count currently return an int value.<br>This has caused problems as DataSets continue to grow, in certain environments.<br></li>
<li>I Addition of the java.sql.DriverAction interface<br><br>This interface may be implemented by a driver that wants to be notified by DriverManager when the driver is deregistered.<br></li>
<li>I Addition of the java.sql.SQLType interface<br><br>An interface used to create an object that represents a generic SQL Type,called a JDBC type or a vendor specific type.<br></li>
<li>I Addition of the java.sql.JDBCType Enum<br><br>An Enum used to identify generic SQL Types, called JDBCType. The intent is to use JDBCType in place of the constants, defined in Types.java.<br></li>
</ul>
<p><em>后面都是对java8中时间的新的类型映射</em></p>
<ul>
<li>I Additional Mappings to Table B-4, Mapping from Java Object to JDBC Types<br><br>Added support to map java.time.LocalDate to JDBC DATE.<br>Added support to map java.time.LocalTime to JDBC TIME<br>12 JDBC 4.2 Specification • March 2014<br>Added support to map java.time.LocalDateTime to JDBC TIMESTAMP.<br>Added support to map java.time.LocalOffsetTime to JDBC<br>TIME_WITH_TIMEZONE.<br>Added support to map java.time.LocalOffsetDateTime to JDBC<br>TIMESTAMP_WITH_TIMEZONE.<br>I Additional Mappings to Table B-5, Performed by setObject and setNull between<br>Java Object Types and Target JDBC Types<br>Allow conversion of java.time.LocalDate to CHAR, VARCHAR,<br>LONGVARCHAR, and DATE.<br>Allow conversion of java.time.LocalTime to CHAR, VARCHAR,<br>LONGVARCHAR, and TIME.<br>Allow conversion of java.time.LocalTime to CHAR, VARCHAR,<br>LONGVARCHAR, and TIMESTAMP.<br>Allow conversion of java.time.OffsetTime to CHAR, VARCHAR,<br>LONGVARCHAR, and TIME_WITH_TIMESTAMP.<br>Allow conversion of java.time.OffsetDateTime to CHAR, VARCHAR,<br>LONGVARCHAR, TIME_WITH_TIMESTAMP and<br>TIMESTAMP_WITH_TIMESTAMP.<br>I Additional Mappings to Table B-6, Use ResultSet getter Methods to retrieve JDBC<br>Types<br>Allow getObject to return TIME_WITH_TIMEZONE,<br>TIMESTAMP_WITH_TIMEZONE.<br></li>
<li>I JDBC API changes<br><br>The following changes were made to existing JDBC interfaces..<br></li>
<li>I BatchUpdateException<br><br>Added a new constructor to support large update counts.<br>Added the method getLargeUpdateCounts.<br></li>
<li>I Connection<br><br>Added the methods abort,getNetworkTimeout, getSchema,<br>setNetworkTimeout, setSchema.<br>Clarified the getMapType, setSchema, setMapType methods.<br></li>
<li>I CallableStatement<br><br>Overloaded the registerOutParameter and setObject methods.<br>Clarified the getObject methods.<br></li>
<li>I Date<br>Added the methods toInstant, toLocalDate<br><br>Chapter 3 Summary of New Features 13<br>Overload the method valueOf</li>
<li>I DatabaseMetaData<br><br>Added the methods supportsRefCursor, getMaxLogicalLobSize.<br>Clarified the getIndexInfo method.<br></li>
<li>I Driver<br><br>Clarified the acceptsURL, and connect, methods<br></li>
<li>I DriverManager<br><br>Overload the registerDriver method.<br>Clarified the getConnection, deregisterDriver, and<br>registerDriver, methods.<br></li>
<li>I PreparedStatement<br><br>Added the method executeLargeUpdate.<br>Overload the method setObject.<br></li>
<li>I ResultSet<br><br>Overloaded the methods updateObject.<br>Clarified the getObject methods.<br></li>
<li>I Statement<br><br>Added the method executeLargeBatch, executeLargeUpdate.<br>getLargeUpdateCount, getLargeMaxRows, and setLargeMaxRows.<br>Clarified the setEscapeProcessing method.<br></li>
<li>I SQLInput<br><br>Added the readObject method.<br></li>
<li>I SQLOutput<br><br>Added the readObject method<br></li>
<li>I Time<br>Added the methods toInstant, toLocalTime<br>Overload the method valueOf<br></li>
<li>I Timestamp<br><br>Added the methods from, toInstant, toLocalTime<br>Overload the method valueOf.<br></li>
<li>I Types<br><br>Added the types REF_CURSOR, TIME_WITH_TIMEZONE, and<br>TIMESTAMP_WITH_TIEMZONE.<br></li>
<li>I SQLXML<br>14 JDBC 4.2 Specification • March 2014<br>Clarified the getSource and setResult methods.<br></li>
<li>I DataSource and XADataSource<br>Clarified that a no-arg constructor must be provided<br></li>
</ul>
<h2 id="关于常用的数据库的驱动说明地址"><a href="#关于常用的数据库的驱动说明地址" class="headerlink" title="关于常用的数据库的驱动说明地址"></a>关于常用的数据库的驱动说明地址</h2><h3 id="pg"><a href="#pg" class="headerlink" title="pg"></a>pg</h3><p><a href="https://jdbc.postgresql.org/download.html#current" target="_blank" rel="noopener">https://jdbc.postgresql.org/download.html#current</a></p>
<h3 id="oracle"><a href="#oracle" class="headerlink" title="oracle"></a>oracle</h3><p><a href="https://www.oracle.com/database/technologies/appdev/jdbc-downloads.html" target="_blank" rel="noopener">https://www.oracle.com/database/technologies/appdev/jdbc-downloads.html</a></p>
<p><strong>总之使用什么jdk 就应该使用对应版本之上的驱动版本 不然可能出现问题</strong></p>
<h2 id="jdbc驱动使用流程图"><a href="#jdbc驱动使用流程图" class="headerlink" title="jdbc驱动使用流程图"></a>jdbc驱动使用流程图</h2><p><img src="/images/jdbc/%E6%B5%81%E7%A8%8B%E5%9B%BE.png" alt=""></p>
<h2 id="jdbc-规范api"><a href="#jdbc-规范api" class="headerlink" title="jdbc 规范api"></a>jdbc 规范api</h2><ul>
<li>主要分为两个包 一个是 java.sql 是一个核心包 还有一个javax.sql<pre>
下面列出一些javax.sql 一些类，其实就是jdbc2 规范中的 对jdbc的扩展的功能
javax.sql.CommonDataSource
javax.sql.ConnectionEvent
javax.sql.ConnectionEventListener
javax.sql.ConnectionPoolDataSource
javax.sql.DataSource
javax.sql.PooledConnection
javax.sql.RowSet
javax.sql.RowSetEvent
javax.sql.RowSetInternal
javax.sql.RowSetListener
javax.sql.RowSetMetaData
javax.sql.RowSetReader
javax.sql.RowSetWriter
javax.sql.StatementEvent
javax.sql.StatementEventListener
javax.sql.XAConnection
javax.sql.XADataSourc
</pre>
<img src="image/%E5%8C%85%E4%B9%8B%E9%97%B4%E7%9A%84%E5%90%88%E4%BD%9C1.png" alt="avatar"><br><img src="image/%E5%8C%85%E4%B9%8B%E9%97%B4%E7%9A%84%E5%90%88%E4%BD%9C2.png" alt="avatar"><br><img src="image/%E5%8C%85%E4%B9%8B%E9%97%B4%E7%9A%84%E5%90%88%E4%BD%9C3.png" alt="avatar"><br><img src="image/%E5%8C%85%E4%B9%8B%E9%97%B4%E7%9A%84%E5%90%88%E4%BD%9C4.png" alt="avatar"></li>
</ul>
<h2 id="关于-DatabaseMetaData-接口"><a href="#关于-DatabaseMetaData-接口" class="headerlink" title="关于 DatabaseMetaData 接口"></a>关于 DatabaseMetaData 接口</h2><pre>
定义了 140 个方法 和40 属性 
这个数据库开发生实现驱动的时候可以通过这个类 ，告诉使用者 数据库的一些特性 以及驱动是否能够实现一些规范中要求的功能
</pre> 

<h2 id="关于-connection"><a href="#关于-connection" class="headerlink" title="关于 connection"></a>关于 connection</h2><h3 id="得到一个connection实例"><a href="#得到一个connection实例" class="headerlink" title="得到一个connection实例"></a>得到一个connection实例</h3><p><img src="/images/jdbc/connection1.png" alt=""></p>
<h3 id="Connection-Pooling"><a href="#Connection-Pooling" class="headerlink" title="Connection Pooling"></a>Connection Pooling</h3><p>连接池通过维护可在客户端会话之间重用的物理数据库连接的缓存来解决此问题。 连接池极大地提高了性能和可伸缩性，尤其是在三层环境中，其中多个客户端可以共享较少数量的物理数据库连接。<br>在图11-1中，JDBC驱动程序提供了ConnectionPoolDataSource的实现，应用程序服务器使用该实现来构建和管理连接池。<br><img src="/images/jdbc/connection2.png" alt=""></p>
<p>值得一提的是两个类ConnectionPoolDataSource PooledConnection,这两个类是通过jndi使用的 </p>
<h2 id="关于事务"><a href="#关于事务" class="headerlink" title="关于事务"></a>关于事务</h2><h3 id="关于事务自动提交"><a href="#关于事务自动提交" class="headerlink" title="关于事务自动提交"></a>关于事务自动提交</h3><p>352/5000<br>Connection属性自动提交指定何时结束事务。 启用自动提交会在每个单独的SQL语句完成后立即进行事务提交。 一条语句被视为“完整”的点取决于SQL语句的类型以及应用程序在执行之后的操作：<br><img src="/images/jdbc/%E4%BA%8B%E5%8A%A11.png" alt=""><br>结束自动提交需要手动提交事务 </p>
<h3 id="事务等级"><a href="#事务等级" class="headerlink" title="事务等级"></a>事务等级</h3><h4 id="数据查询出现的问题"><a href="#数据查询出现的问题" class="headerlink" title="数据查询出现的问题"></a>数据查询出现的问题</h4><p>脏读 不可重复读 幻读<br><br>事务隔离级别指定事务中的语句“可见”哪些数据。 通过定义针对同一目标数据源的事务之间可能进行的交互（如果有），它们直接影响并发访问的级别。 并发事务之间的可能交互分类如下：</p>
<ul>
<li>当允许事务查看未提交的数据更改时，就会发生脏读。 换句话说，在事务内部进行的更改在提交之前在事务外部可见。 如果更改被回滚而不是被提交，则其他事务可能基于不正确的瞬态数据完成工作。</li>
<li>在以下情况下发生不可重复的读取：<br>  a. Transaction A reads a row<br><br>  b. Transaction B changes the row<br><br>  c. Transaction A reads the same row a second time and gets different results<br></li>
<li>幻读取发生在<br>  a. Transaction A reads all rows that satisfy a WHERE condition<br><br>  b. Transaction B inserts an additional row that satisfies the same condition<br><br>  c. Transaction A reevaluates the WHERE condition and picks up the additional<br>  “phantom” row<br>      </li>
</ul>
<h4 id="jdbc-事务等级"><a href="#jdbc-事务等级" class="headerlink" title="jdbc 事务等级"></a>jdbc 事务等级</h4><p>JDBC通过添加TRANSACTION_NONE增强了SQL：2003定义的四个级别的事务隔离。 从最低限制到最高限制，事务隔离级别为：</p>
<ul>
<li>TRANSACTION_NONE — indicates that the driver does not support transactions,<br>which means that it is not a JDBC compliant driver.</li>
<li>TRANSACTION_READ_UNCOMMITTED — allows transactions to see uncommitted<br>changes to the data. This means that dirty reads, nonrepeatable reads, and<br>phantom reads are possible.</li>
<li>TRANSACTION_READ_COMMITTED — means that any changes made inside a<br>transaction are not visible outside the transaction until the transaction is<br>committed. This prevents dirty reads, but nonrepeatable reads and phantom<br>reads are still possible.（随着事务隔离级别的提高，需要更多的锁定和其他DBMS开销来确保正确的语义。 反过来，这降低了可以支持的并发访问的程度。 结果，当应用程序使用较高的事务隔离级别时，它们的性能可能会下降。 因此，事务管理器，无论是应用程序本身还是应用程序服务器的一部分，都应在确定哪种事务隔离级别合适时权衡对数据一致性的需求和对性能的要求。  一般我们将事务设置到这里就可以了 设置越高级维护越消耗资源）</li>
<li>TRANSACTION_REPEATABLE_READ — disallows dirty reads and nonrepeatable<br>reads. Phantom read are still possible.</li>
<li>TRANSACTION_SERIALIZABLE — specifies that dirty reads, nonrepeatable reads,<br>and phantom reads are prevented.<br> </li>
</ul>
<p>*<font color="red"><b>通过connection类的 setTransactionIsolation 方法可以设置事务的等级</font>*</p>
<h4 id="Savepoints"><a href="#Savepoints" class="headerlink" title="Savepoints"></a>Savepoints</h4><p>通过设置保存点 可以更加细粒度控制事务<br>通过 connection调用<br><img src="/images/jdbc/%E4%BA%8B%E5%8A%A12.png" alt=""></p>
<pre>Connection.releaseSavepoint 
删除保存点
Connection.releaseSavepoint方法将Savepoint对象作为参数，并将其以及当前事务中的所有后续保存点删除。
释放保存点后，尝试在回滚操作中引用该保存点将导致引发SQLException。
在提交事务或回滚整个事务时，将自动释放在事务中创建的所有保存点，并使其无效。
将事务回滚到保存点会自动释放，并使在该保存点之后创建的任何其他保存点无效
</pre>

<h4 id="分布式事务"><a href="#分布式事务" class="headerlink" title="分布式事务"></a>分布式事务</h4><p><img src="/images/jdbc/%E4%BA%8B%E5%8A%A13.png" alt=""><br>从图中可以看到使用同一个事务管理，比如我们使用jta事务的时候 使用 UserTrancation 来作为多个连接的事务管理器<br>在我写的很多代码都是单一操作数据库连接，并没有存在一个方法快中同时使用了n个服务的情况 ，jta事务在公司用的比较少见，但是真的对应分模块的应用来说分布式事务确实需要非常重视</p>
<h3 id="statement-执行引擎"><a href="#statement-执行引擎" class="headerlink" title="statement 执行引擎"></a>statement 执行引擎</h3><p>也就调用存储过程特别，其他并没有什么特别的注意点</p>
<h3 id="resultset-返回结果"><a href="#resultset-返回结果" class="headerlink" title="resultset 返回结果"></a>resultset 返回结果</h3>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">老许</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%20%7C%7C%20archive">
              
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">老许</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
